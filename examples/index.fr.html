<!doctype html>
<html lang='fr'>
	<head>
		<title>Example for gettext</title>
		
        <link rel='stylesheet' href='../orange-style.css' />
		<link rel='gettext' lang='en' href='translations/en.json' />
		<link rel='gettext' lang='fr' href='translations/fr.json' />
		<link rel='gettext' lang='es' href='translations/es.json' />
		<link rel='gettext' lang='pl' href='translations/pl.json' />
	</head>
<body>
    <h1><a href='../index.html' title='back to home'><img src='../logo_orange.gif' title='Orange Logo' /> <span>gettext.js</span></a></h1>
    <h2>Example</h2>
	<p>This text is static, it must be translated using server-side
	libraries.</p>
	<p>The text that is displayed by the buttons is dynamic, it is translated
	using the gettext JS library. This only works when the files are
    on a server.</p>
	<p>You can have a look to the very same file
	<a href='index.fr.html' title='the very same file in french'>in french</a>,
	<a href='index.es.html' title='the very same file in spanish'>in spanish</a> and
	<a href='index.polish.html' title='the very same file in polish'>in polish</a>.</p>
	<p>Only the dynamic parts are translated, only the <code>lang</code>
	attribute in <code>html</code> is changed.</p>
	
	<button id='text1'>Show text 1</button>
	<button id='text2'>Show text 2</button>
	<button id='text3'>Show text 3</button>
	<button id='text4'>Show untranslated text</button>
	<div><label>Number of sheeps: <input type='text' size="4" id='plural-number' value='2'/></label>
	<button id='plural-button'>Show how many sheeps are in the sheepfold</button></div>

<script src='../lib.gettext.js'></script>
<script>
<!--
var translations = {
	text1: "$$text1$$",
	text2: "$$text2$$",
	text3: "$$text3$$",
	text4: "$$text4$$"
},
	pluralTranslation = "$$sheeps-in-sheepfold$$";

gt.init({
	callback: onTranslationsLoaded
});

// it should be faster if we use the gettext object from the parameter
function onTranslationsLoaded(gt) {
	gt._o(translations);
}

function appendText(str) {
	var p = document.createElement("p");
	p.appendChild(document.createTextNode(str));
	document.body.appendChild(p);
}

function init() {
	document.body.onclick = function(e) {
		e = e || window.event;
		var target = e.target;
		if (target.tagName.toLowerCase() == 'button') {
			var translation = translations[target.id];
			appendText(translation);
		}
	};
	
	document.getElementById('plural-button').onclick = function(e) {
		e = e || window.event;
		var nb = document.getElementById('plural-number').value;
		var translation = gt._n(pluralTranslation, pluralTranslation, nb);
		appendText(gt.strfmt(translation, nb));
		e.stopPropagation && e.stopPropagation();
		e.cancelBubble = true;
	}
}

window.onload = init;
// -->
</script>
</body>
</html>
